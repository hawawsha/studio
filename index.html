// 1ƒ71…71„71ƒ91„71ƒ91„2 1„01‡41ƒ81„1 1„21…51„01‡41†6 1ƒ91†81‡11‡21ƒ91‡21…21„1 (Backend Interface)
const Pi = window.Pi;
// 1„21†51…71‡41†8 1ƒ91†81†4 Sandbox 1†81…41†91ƒ91‡0 1…71†91†8 1ƒ91†81„91ƒ91„01…5 1„71ƒ91„61†8 Pi Browser 1„01„71‡21‡0 1†91…21ƒ91†71†8
Pi.init({sjio540h9umsvq5fq5ogw8iqst7k9eif2jrqzv8a5bdxnrchshsnnm1fljhshyfo }); 

// 1…71‡01‡21ƒ91‡0 1ƒ91†81†91„51†51…61„1 1ƒ91†81„31ƒ91†81„31„1 (1„61…01‡01„1 1ƒ91†81†91‡01…31„1 1ƒ91†81†91„91†71…01‡41„1) - 1ƒ91†81†91„91„21„01…51„1 1„01†91„51†51…61„1 1ƒ51„61„21†7
const platformWalletAddress = "GAJY6WGGRRGEFXTPMZAIC57MEKZUA5XMWYOWUQ4KL4GEUE3ZJWVUTJZN"; 

async function handlePayment(amount, itemName) {
    try {
        console.log("1ƒ71„91…11ƒ91†8 1…51†81„0 1„71†51…7 1†81†81†91„51†51…61„1: " + platformWalletAddress);
        const payment = await Pi.createPayment({
            amount: amount,
            memo: "1„51„41…0 1†91‡0 1†91‡01…31„1 1ƒ91†81‡11‡21ƒ91‡21…21„1: " + itemName,
            metadata: { type: "reservation", target_wallet: platformWalletAddress },
        }, {
            onReadyForServerApproval: (paymentId) => {
                console.log("Payment ID ready for approval:", paymentId);
            },
            onReadyForServerCompletion: (paymentId, txid) => {
                console.log("1„21†91„2 1ƒ91†81…71†91†81‡41„1 1„01‡01„41ƒ91„5! 1„91†61†9 1ƒ91†81†91…71ƒ91†91†81„1:", txid);
                alert("1„21†9 1ƒ91†81„51„41…0 1„01‡01„41ƒ91„5! 1…11‡41„21†9 1ƒ91†81„21‡21ƒ91…31†8 1†91…71†7 1†61„91‡41„01ƒ91‡5.");
            },
            onCancel: (paymentId) => { console.log("1„21†9 1ƒ71†81…81ƒ91ƒ3 1…71†91†81‡41„1 1ƒ91†81„71†51…7"); },
            onError: (error, payment) => { console.error("1„61…51ƒ5 1†51‡4 1ƒ91†81„71†51…7:", error); },
        });
    } catch (err) {
        console.error("1„21…71„81„9 1„01„71ƒ3 1…71†91†81‡41„1 1ƒ91†81„71†51…7:", err);
    }
}
